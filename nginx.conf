# Nginx configuration for SPA with friendly URLs
server {
    listen 80;
    server_name yourdomain.com;
    root /var/www/html;
    index index.html;

    # Legacy product URLs redirect to new slug-based URLs
    location = /product/1 { return 301 /produto/progressiva-organica-liso-therapy; }
    location = /product/2 { return 301 /produto/tophair-gummy-cabelo-pele-unha; }
    location = /product/3 { return 301 /produto/hidratante-intimo-love-girl; }
    location = /product/4 { return 301 /produto/progressiva-vegetal-havana; }
    location = /product/5 { return 301 /produto/depilador-feminino-5-em-1; }
    location = /product/6 { return 301 /produto/clareador-manchas-pele; }
    location = /product/7 { return 301 /produto/escova-limpeza-facial-5-em-1; }
    location = /product/8 { return 301 /produto/batom-depilador-depilaplus; }
    location = /product/10 { return 301 /produto/pente-alisador-portatil; }
    location = /product/11 { return 301 /produto/depilador-laser-flex; }

    # Handle React Router (client-side routing)
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Static files
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}